<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>OCS NFI Laporan Kehadiran Teks Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

<style>
  /* ========================= */
  /* M3 BLUE TONAL THEME       */
  /* ========================= */
  :root {
    --bg-color: #f7f9ff; 
    --surface-variant: #e0e7f5;
    --primary-color: #005691; /* Deep Oceanic Blue */
    --on-primary: #ffffff;
    --primary-container: #d1e4ff;
    --on-primary-container: #001d36;
    --secondary-container: #dae2f9;
    --on-secondary-container: #131c2b;
    --text-main: #191c20;
    --text-dim: #44474e;
    --outline: #74777f;
    --whatsapp-green: #25d366;
    --error: #ba1a1a;
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    font-family: 'Google Sans', 'Roboto', 'Segoe UI', system-ui, sans-serif;
    background: var(--bg-color);
    color: var(--text-main);
    padding: 16px;
    max-width: 500px;
    margin: auto;
    line-height: 1.6;
  }

  header {
    margin-bottom: 24px;
    text-align: center;
    padding-top: 10px;
  }

  h2 {
    font-size: 22px;
    font-weight: 600;
    color: var(--primary-color);
    letter-spacing: -0.5px;
    line-height: 1.2;
  }

  p.subtitle {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-dim);
    margin-top: 6px;
    font-style: italic;
  }

  .m3-card {
    background: #ffffff;
    border-radius: 24px;
    padding: 20px;
    margin-bottom: 16px;
    border: 1px solid #dee3eb;
    box-shadow: 0 4px 12px rgba(0, 86, 145, 0.04);
  }

  .input-group {
    margin-bottom: 16px;
  }

  label {
    display: block;
    margin-bottom: 6px;
    font-size: 13px;
    font-weight: 600;
    color: var(--primary-color);
    margin-left: 4px;
  }

  input, select {
    width: 100%;
    padding: 14px 16px;
    border-radius: 14px;
    border: 1px solid var(--outline);
    background: #ffffff;
    color: var(--text-main);
    font-size: 15px;
    transition: all 0.2s ease;
  }

  input:focus, select:focus {
    outline: none;
    border: 2px solid var(--primary-color);
    padding: 13px 15px;
  }

  /* Status Button Grid */
  .status-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin-bottom: 16px;
  }

  .btn-status {
    background: var(--secondary-container);
    border: none;
    padding: 14px;
    border-radius: 18px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    transition: all 0.2s;
    color: var(--on-secondary-container);
    font-weight: 500;
  }

  .btn-status:active {
    transform: scale(0.96);
    filter: brightness(0.9);
  }

  .btn-status.full {
    grid-column: span 2;
    flex-direction: row;
    justify-content: space-between;
    padding: 14px 20px;
  }

  .badge {
    background: var(--primary-color);
    color: white;
    padding: 2px 12px;
    border-radius: 10px;
    font-size: 12px;
    font-weight: bold;
  }

  textarea {
    width: 100%;
    height: 160px;
    padding: 16px;
    border-radius: 18px;
    border: none;
    background: var(--surface-variant);
    font-family: 'Menlo', 'Monaco', monospace;
    font-size: 13px;
    line-height: 1.5;
    resize: none;
    color: #2c313a;
    margin-top: 10px;
  }

  .btn-main {
    width: 100%;
    padding: 16px;
    border-radius: 100px;
    border: none;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }

  .btn-primary {
    background: var(--primary-color);
    color: var(--on-primary);
    box-shadow: 0 8px 16px rgba(0, 86, 145, 0.2);
    margin-top: 12px;
  }

  .btn-wa {
    background: var(--whatsapp-green);
    color: white;
    box-shadow: 0 8px 16px rgba(37, 211, 102, 0.15);
    margin-top: 12px;
  }

  /* MODAL */
  .modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(19, 28, 43, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: flex-end;
  }

  .modal-content {
    background: #ffffff;
    width: 100%;
    max-width: 500px;
    border-radius: 32px 32px 0 0;
    padding: 24px;
    max-height: 80vh;
    overflow-y: auto;
    animation: slideUp 0.35s cubic-bezier(0.33, 1, 0.68, 1);
    position: relative;
  }

  @keyframes slideUp {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
  }

  .list-item {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    border-radius: 16px;
    margin-bottom: 6px;
    cursor: pointer;
    background: #f1f4f9;
  }

  .list-item:active {
    background: var(--primary-container);
  }

  .list-item input {
    width: 22px;
    height: 22px;
    margin-right: 16px;
    accent-color: var(--primary-color);
    pointer-events: none;
  }

  .list-item .info .name {
    font-weight: 600;
    display: block;
    color: var(--on-primary-container);
  }

  .list-item .info .area {
    font-size: 12px;
    color: var(--text-dim);
  }

  .section-title {
    font-size: 13px;
    font-weight: 800;
    color: var(--primary-color);
    margin: 24px 0 10px 6px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
</style>
</head>
<body>

<header>
  <h2>OCS NFI Laporan Kehadiran Teks Generator</h2>
  <p class="subtitle">By Pohara Ayub</p>
</header>

<div class="m3-card">
  <div class="input-group">
    <label>Salam Pembuka</label>
    <select id="salam">
      <option>Selamat pagi</option>
      <option>Selamat siang</option>
      <option>Selamat malam</option>
    </select>
  </div>

  <div class="input-group">
    <label>Pilih Tanggal</label>
    <input type="date" id="tanggal">
  </div>

  <div class="input-group" style="margin-bottom: 0;">
    <label>Waktu Shift</label>
    <select id="shift">
      <option>Shift pagi (07.00‚Äì15.00)</option>
      <option>Shift siang (13.00‚Äì18.00)</option>
      <option>Shift malam (22.00‚Äì06.00)</option>
    </select>
  </div>
</div>

<div class="section-title">Status Kehadiran</div>
<div class="status-grid">
    <button class="btn-status" onclick="openPopup('hadir')">
      <span>‚úÖ Hadir</span>
      <span class="badge" id="count-hadir">0</span>
    </button>
    <button class="btn-status" onclick="openPopup('izin')">
      <span>‚úâÔ∏è Izin</span>
      <span class="badge" id="count-izin">0</span>
    </button>
    <button class="btn-status" onclick="openPopup('sakit')">
      <span>ü§í Sakit</span>
      <span class="badge" id="count-sakit">0</span>
    </button>
    <button class="btn-status" onclick="openPopup('alpa')">
      <span>üö´ Alpa</span>
      <span class="badge" id="count-alpa">0</span>
    </button>
    <button class="btn-status full" onclick="openPopup('off')">
      <span>üè† Libur / OFF</span>
      <span class="badge" id="count-off">0</span>
    </button>
</div>

<div class="m3-card">
  <label>Catatan Tambahan</label>
  <input type="text" id="catatan" placeholder="Ketik keterangan tambahan..." autocomplete="off">
</div>

<div class="section-title">Hasil Laporan</div>
<div class="m3-card" style="padding: 14px;">
  <textarea id="hasil" readonly></textarea>
  
  <button class="btn-main btn-wa" onclick="sendToWhatsApp()">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
      <path d="M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.582 2.128 2.182-.573c.978.58 1.911.928 3.145.929 3.178 0 5.767-2.587 5.768-5.766 0-3.18-2.587-5.771-5.764-5.771zm3.392 8.244c-.144.405-.837.774-1.17.824-.299.045-.677.063-1.092-.069-.252-.08-.575-.187-.988-.365-1.739-.751-2.874-2.502-2.961-2.617-.087-.116-.708-.94-.708-1.793 0-.853.448-1.273.607-1.446.159-.173.346-.217.462-.217l.332.006c.106.005.249-.04.39.298.144.347.491 1.2.534 1.287.043.087.072.188.014.304-.058.116-.087.188-.173.289l-.26.304c-.087.101-.177.211-.077.383.1.173.444.735.95 1.185.65.579 1.2.76 1.373.846.173.087.275.072.376-.043.101-.116.434-.506.549-.68.116-.173.231-.144.39-.087.158.058 1.011.477 1.184.564.173.087.289.129.332.202.043.073.043.423-.101.827zM12.003 2c-5.522 0-9.997 4.477-9.997 10 0 1.764.459 3.419 1.263 4.858L2 22l5.285-1.388c1.4.78 3.003 1.229 4.711 1.229 5.522 0 10-4.477 10-10 0-5.522-4.478-10-9.997-10z"/>
    </svg>
    Kirim ke WhatsApp
  </button>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-content" id="modal-container">
    <div style="width: 36px; height: 4px; background: #c4c7cf; border-radius: 2px; margin: 0 auto 20px;"></div>
    <h3 id="modal-title" style="text-align:center; color:var(--primary-color); margin-bottom:20px; font-weight: 600;">Data Karyawan</h3>
    <div id="modal-list" style="margin-bottom: 24px;"></div>
    <button class="btn-main btn-primary" id="btn-done">Selesai</button>
  </div>
</div>

<script>
const karyawanList = [
  { nama: "Pohara Ayub", area: "Team Leader" },
  { nama: "Sadulloh", area: "Team Leader" },
  { nama: "Saiful Bahri", area: "Office Lantai 1" },
  { nama: "Siti Maemunah", area: "Office Lantai 2" },
  { nama: "Sulaiman", area: "Office Jakarta" },
  { nama: "Wahidin", area: "Gardener" },
  { nama: "Edi Ahmad Jubaedi", area: "Produksi" },
  { nama: "Ade Surahman", area: "Produksi" },
  { nama: "Muhammad Toni", area: "Produksi" },
  { nama: "M. Rifai", area: "Produksi" },
  { nama: "Amrullah", area: "Warehouse 1 & 2" },
  { nama: "Nabrih", area: "Pembersihan Pallet" }
];

let activeCategory = "";
const selections = { hadir: [], izin: [], sakit: [], alpa: [], off: [] };

function openPopup(category) {
  activeCategory = category;
  const modal = document.getElementById("modal");
  const titles = { hadir: "HADIR", izin: "IZIN", sakit: "SAKIT", alpa: "ALPA", off: "LIBUR / OFF" };
  document.getElementById("modal-title").innerText = "STATUS: " + titles[category];
  
  renderList();
  modal.style.display = "flex";
}

function renderList() {
  const listDiv = document.getElementById("modal-list");
  listDiv.innerHTML = "";
  
  karyawanList.forEach((k, index) => {
    const val = `${k.nama} (${k.area})`;
    const isChecked = selections[activeCategory].includes(val);
    
    const item = document.createElement("div");
    item.className = "list-item";
    item.innerHTML = `
      <input type="checkbox" id="cb-${index}" ${isChecked ? "checked" : ""}>
      <div class="info">
        <span class="name">${k.nama}</span>
        <span class="area">${k.area}</span>
      </div>
    `;
    
    item.onclick = (e) => {
        const checkbox = item.querySelector('input');
        checkbox.checked = !checkbox.checked;
        handleCheckChange(val, checkbox.checked);
    };
    
    listDiv.appendChild(item);
  });
}

function handleCheckChange(value, isChecked) {
    if (isChecked) {
        if (!selections[activeCategory].includes(value)) {
            selections[activeCategory].push(value);
        }
    } else {
        selections[activeCategory] = selections[activeCategory].filter(v => v !== value);
    }
    updateBadgeCounts();
    updatePreview();
}

function updateBadgeCounts() {
    for (const cat in selections) {
        const badge = document.getElementById(`count-${cat}`);
        if(badge) badge.innerText = selections[cat].length;
    }
}

function closePopup() { 
    document.getElementById("modal").style.display = "none"; 
}

function formatTanggal(dateStr) {
  const d = new Date(dateStr);
  if(isNaN(d.getTime())) return "-";
  const hari = ["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];
  const bulan = ["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];
  return `${hari[d.getDay()]}, ${d.getDate()} ${bulan[d.getMonth()]} ${d.getFullYear()}`;
}

function formatList(arr) {
  return arr.length ? "\n- " + arr.join("\n- ") : " -";
}

function updatePreview() {
    const salam = document.getElementById("salam").value;
    const tanggal = document.getElementById("tanggal").value;
    const shift = document.getElementById("shift").value;
    const catatan = document.getElementById("catatan").value;

    const hasil = `${salam},

üìã LAPORAN KEHADIRAN MEMBER OCS NFI
----------------------------------
üìÖ Tanggal : ${formatTanggal(tanggal)}
üïí Shift   : ${shift}

‚úÖ HADIR (${selections.hadir.length}):${formatList(selections.hadir)}

‚úâÔ∏è IZIN   :${formatList(selections.izin)}
ü§í SAKIT  :${formatList(selections.sakit)}
üö´ ALPA   :${formatList(selections.alpa)}
üè† OFF    :${formatList(selections.off)}

${catatan.trim() ? "üìù CATATAN: " + catatan + "\n" : ""}
Demikian terimakasih üôè`;

    document.getElementById("hasil").value = hasil;
}

function sendToWhatsApp() {
    const text = document.getElementById("hasil").value;
    const url = "https://api.whatsapp.com/send?text=" + encodeURIComponent(text);
    window.open(url, "_blank");
}

document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("tanggal").value = new Date().toISOString().split("T")[0];
  const ids = ["salam", "tanggal", "shift", "catatan"];
  ids.forEach(id => document.getElementById(id).addEventListener("input", updatePreview));

  document.getElementById("btn-done").addEventListener("click", (e) => {
    e.stopPropagation();
    closePopup();
  });

  const modal = document.getElementById("modal");
  modal.addEventListener("click", (e) => {
    if (e.target === modal) closePopup();
  });

  updatePreview();
});
</script>
</body>
</html>

